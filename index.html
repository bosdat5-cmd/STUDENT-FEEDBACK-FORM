<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Faculty Feedback Form</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Poppins', sans-serif; background: #f9fafb; margin:0; padding:0; }
    .container { max-width: 800px; margin: 20px auto; padding: 20px; background: #fff; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    h2 { text-align:center; margin-bottom:20px; }
    label { display:block; margin-top:15px; font-weight:600; }
    input, select, textarea { width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:8px; }
    button { background:#2563eb; color:#fff; border:none; padding:12px 24px; border-radius:8px; margin-top:20px; cursor:pointer; font-size:16px; }
    button:disabled { background:#999; }
    #loader { display:none; justify-content:center; align-items:center; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.7); z-index:1000; }
    #loader span { padding:20px; background:#fff; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.2); font-weight:600; }
  </style>
</head>
<body>
<div class="container">
  <h2>Faculty Feedback Form</h2>

  <!-- Student Info -->
  <label>Student Name *</label>
  <input type="text" id="studentName" required>

  <label>Registration Number *</label>
  <input type="text" id="regNumber" required>

  <label>Email *</label>
  <input type="email" id="email" required>

  <label>Mobile Number *</label>
  <input type="text" id="mobile" required>

  <label>Batch ID *</label>
  <input type="text" id="batchId" required>

  <label>Faculty *</label>
  <select id="faculty" required>
    <option value="">Select Faculty</option>
    <option value="Faculty 1">Faculty 1</option>
    <option value="Faculty 2">Faculty 2</option>
    <option value="Faculty 3">Faculty 3</option>
    <option value="Faculty 4">Faculty 4</option>
    <option value="Faculty 5">Faculty 5</option>
  </select>

  <!-- 13 Rating Questions -->
  <h3>Rate the following (1-5)</h3>
  <div id="questionsContainer">
    <label>Q1. Punctuality</label><input type="number" id="q0" min="1" max="5" required>
    <label>Q2. Regularity</label><input type="number" id="q1" min="1" max="5" required>
    <label>Q3. Subject Knowledge</label><input type="number" id="q2" min="1" max="5" required>
    <label>Q4. Communication</label><input type="number" id="q3" min="1" max="5" required>
    <label>Q5. Presentation</label><input type="number" id="q4" min="1" max="5" required>
    <label>Q6. Interaction</label><input type="number" id="q5" min="1" max="5" required>
    <label>Q7. Doubt Clarification</label><input type="number" id="q6" min="1" max="5" required>
    <label>Q8. Discipline</label><input type="number" id="q7" min="1" max="5" required>
    <label>Q9. Use of Examples</label><input type="number" id="q8" min="1" max="5" required>
    <label>Q10. Syllabus Coverage</label><input type="number" id="q9" min="1" max="5" required>
    <label>Q11. Quality of Notes</label><input type="number" id="q10" min="1" max="5" required>
    <label>Q12. Encourages Questions</label><input type="number" id="q11" min="1" max="5" required>
    <label>Q13. Overall Effectiveness</label><input type="number" id="q12" min="1" max="5" required>
  </div>

  <!-- 4 Parameter Questions -->
  <h3>Additional Parameters</h3>
  <label>ParaQ1. Pace of Teaching</label><input type="number" id="paraQ0" min="1" max="5" required>
  <label>ParaQ2. Encouragement</label><input type="number" id="paraQ1" min="1" max="5" required>
  <label>ParaQ3. Practical Relevance</label><input type="number" id="paraQ2" min="1" max="5" required>
  <label>ParaQ4. Classroom Engagement</label><input type="number" id="paraQ3" min="1" max="5" required>

  <!-- Quiz + Calculated -->
  <label>Quiz Marks</label>
  <input type="number" id="quizMarks">

  <p><b>Weightage Score:</b> <span id="weightageScore">0</span></p>
  <p><b>Grade:</b> <span id="grade">-</span></p>

  <!-- Comments -->
  <label>Additional Comments (Optional)</label>
  <textarea id="additionalComments"></textarea>

  <!-- Submit -->
  <button onclick="submitFeedback()">Submit Feedback</button>
</div>

<div id="loader"><span>Submitting...</span></div>

<script>
const SCRIPT_URL = "YOUR_WEB_APP_URL_HERE";  // Replace with deployed Google Apps Script Web App URL

function submitFeedback(){
  let answers = [];
  for(let i=0; i<13; i++){
    answers.push(document.getElementById("q"+i).value || "");
  }
  for(let i=0; i<4; i++){
    answers.push(document.getElementById("paraQ"+i).value || "");
  }

  const data = {
    studentName: document.getElementById("studentName").value.trim(),
    regNumber: document.getElementById("regNumber").value.trim(),
    email: document.getElementById("email").value.trim(),
    mobile: document.getElementById("mobile").value.trim(),
    faculty: document.getElementById("faculty").value,
    batchId: document.getElementById("batchId").value.trim(),
    answers: answers,
    quizMarks: document.getElementById("quizMarks").value.trim(),
    weightage: document.getElementById("weightageScore").innerText,
    grade: document.getElementById("grade").innerText,
    additionalComments: document.getElementById("additionalComments").value.trim()
  };

  document.getElementById("loader").style.display="flex";

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify(data)  // âœ… no headers
  })
  .then(res => res.json())
  .then(res => {
    document.getElementById("loader").style.display="none";
    if(res.status==="success"){
      alert("Feedback submitted successfully!");
    } else {
      alert("Submission failed: " + res.message);
    }
  })
  .catch(err => {
    document.getElementById("loader").style.display="none";
    alert("Error submitting feedback: " + err);
  });
}
</script>
</body>
</html>
